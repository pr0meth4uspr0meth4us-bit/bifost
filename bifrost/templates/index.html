<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bifrost | Helm Ecosystem Identity</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>body { font-family: 'Plus Jakarta Sans', sans-serif; }</style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

<div class="bg-white border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-6 py-24 text-center">

        <img src="{{ url_for('static', filename='logo.png') }}" alt="Bifrost" class="h-24 w-auto mx-auto mb-8 drop-shadow-xl">

        <h1 class="text-5xl font-extrabold text-slate-900 tracking-tight mb-6">
            Bifrost <span class="text-indigo-600">Identity Provider</span>
        </h1>
        <p class="text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed">
            Bifrost is a dedicated Identity Provider (IdP) built to <strong>centralize authentication</strong>
            and security across the <strong>Helm</strong> digital product family. It ensures seamless,
            secure access for every service in our ecosystem.
        </p>
    </div>
</div>

<div class="max-w-7xl mx-auto px-6 py-16 flex-grow">
    <h2 class="text-sm font-black uppercase tracking-[0.2em] text-slate-400 mb-10 text-center">The Helm Product Family</h2>

    {% if apps %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for product in apps %}
        <div class="bg-white rounded-[2rem] p-8 border border-slate-200 hover:shadow-2xl transition-all duration-300 flex flex-col h-full">
            <div class="flex items-center space-x-4 mb-8">
                <div class="h-14 w-14 bg-slate-50 rounded-2xl flex items-center justify-center p-2 shadow-inner">
                    {% if product.app_logo_url %}
                    <img src="{{ product.app_logo_url }}" alt="Logo" class="h-full w-full object-contain">
                    {% else %}
                    <span class="text-xl font-bold text-indigo-600">{{ product.app_name[0] }}</span>
                    {% endif %}
                </div>
                <div>
                    <h3 class="text-xl font-bold text-slate-900">{{ product.app_name }}</h3>
                    <p class="text-xs font-bold text-indigo-500 uppercase tracking-widest">Helm Ecosystem</p>
                </div>
            </div>

            <p class="text-slate-500 mb-10 flex-grow">
                Integrated with Bifrost for secure SSO and centralized user management.
            </p>

            <div class="flex flex-col space-y-3">
                <a href="{{ product.app_web_url or '#' }}" target="_blank"
                   class="w-full py-4 bg-slate-900 text-white text-center font-bold rounded-2xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200">
                    Visit {{ product.app_name }}
                </a>

                <a href="{{ url_for('auth_ui.login', client_id=product.client_id) }}"
                   class="w-full py-3 bg-white text-slate-500 text-center font-bold rounded-2xl border border-slate-200 hover:bg-slate-50 transition-all text-sm">
                    Sign In with Bifrost
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="bg-white rounded-[2rem] p-20 text-center border-2 border-dashed border-slate-200">
        <p class="text-slate-400 font-medium">No products registered in the Helm family yet.</p>
        <a href="/backoffice" class="text-indigo-600 font-bold hover:underline mt-4 inline-block">Manage via Bifrost Admin</a>
    </div>
    {% endif %}
</div>

<footer class="mt-auto py-12 border-t border-slate-200 text-center bg-white">
    <p class="text-slate-400 text-sm font-medium">Â© 2026 Helm Digital Products. Powering identity via Bifrost IdP.</p>
</footer>

</body>
</html>